!function(e){"use strict";let t="background:#f6e2d8!important;background:linear-gradient(45deg,#f6e2d8 0%,#68c2e8 100%)!important;",i=`.slideon{position:relative;display:inline-block;width:42px;height:24px;vertical-align:middle}.slideon>input,input.slideon{display:none}.slideon-slider{position:absolute;cursor:pointer;border-radius:34px;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.slideon-slider:before{position:absolute;content:"";height:22px;width:22px;left:1px;bottom:1px;border-radius:50%;background-color:#fff;-webkit-transition:.4s;transition:.4s;-webkit-box-shadow:0 0 3px 0 rgba(0,0,0,.45);-moz-box-shadow:0 0 3px 0 rgba(0,0,0,.45);box-shadow:0 0 3px 0 rgb(0,0,0,.45)}.slideon input:checked~.slideon-slider{${t}}.slideon input:checked~.slideon-slider:before{-webkit-transform:translateX(18px);-ms-transform:translateX(18px);transform:translateX(18px)}.slideon input:disabled~.slideon-slider{opacity:.5}`,a=`.instantgram-light-btn,label{display:inline-block}.instantgram-light-btn{padding:.25rem 1.9rem .4rem 1.9rem;font-size:1rem;font-weight:400;line-height:1.5}.alert,p{margin-bottom:1rem}@keyframes horizontal-shaking{0%,100%{transform:translateX(0)}25%,75%{transform:translateX(5px)}50%{transform:translateX(-5px)}}.instantgram-light-btn{color:#212529;text-align:center;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control,.form-group{display:block;width:100%}.instantgram-light-btn:hover{color:#212529;text-decoration:none}.instantgram-light-btn:not(:disabled):not(.disabled){cursor:pointer}.instantgram-light-btn-primary{color:#fff!important;${t}border:4px!important}.instantgram-light-btn-primary:hover{color:#fff!important;background-color:#0069d9!important;border-color:#0062cc!important}.instantgram-light-btn-primary:not(:disabled):not(.disabled).active,.instantgram-light-btn-primary:not(:disabled):not(.disabled):active,.show>.instantgram-light-btn-primary.dropdown-toggle{color:#fff;background-color:#0062cc;border-color:#005cbf}.instantgram-light-btn-primary:not(:disabled):not(.disabled).active:focus,.instantgram-light-btn-primary:not(:disabled):not(.disabled):active:focus,.show>.instantgram-light-btn-primary.dropdown-toggle:focus{box-shadow: 0 0 0 .2rem rgba(246, 226, 216, 0.5)}.instantgram-light-btn-success{color:#fff!important;background-color:#28a745!important;border-color:#28a745!important}.mt-1,.my-1{margin-top:.25rem!important}.mt-2,.my-2{margin-top:.5rem!important}.mt-3,.my-3{margin-top:1rem!important}.w94{width:94%!important}.ml-15,.mr-15{margin-left:15px!important}label{margin-bottom:.5rem}.form-control{padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;height:calc(1.5em + .75rem + 2px);color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.alert{position:relative;padding:.75rem 1.25rem;border:1px solid transparent;border-radius:.25rem}.alert-warning{color:#856404;background-color:#fff3cd;border-color:#ffeeba}.pr-0{padding-right:0!important}.col,.col-12,.col-auto{max-width:100%}.instantgram-light-modal-body *{box-sizing:border-box}b,strong{font-weight:bolder}button,input{overflow:visible}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-auto,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-auto,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-auto,.col-sm,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-auto,.col-xl,.col-xl-1,.col-xl-10,.col-xl-11,.col-xl-12,.col-xl-2,.col-xl-3,.col-xl-4,.col-xl-5,.col-xl-6,.col-xl-7,.col-xl-8,.col-xl-9,.col-xl-auto{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;min-width:0}.col-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto}.col-12{-ms-flex:0 0 100%;flex:0 0 100%}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:576px){.container{max-width:540px}}@media (min-width:768px){.container{max-width:720px}}@media (min-width:992px){.container{max-width:960px}}@media (min-width:1200px){.container{max-width:1140px}}@media (min-width:576px){.container,.container-sm{max-width:540px}}@media (min-width:768px){.container,.container-md,.container-sm{max-width:720px}}@media (min-width:992px){.container,.container-lg,.container-md,.container-sm{max-width:960px}}@media (min-width:1200px){.container,.container-lg,.container-md,.container-sm,.container-xl{max-width:1140px}}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}.justify-content-center{-ms-flex-pack:center!important;justify-content:center!important}.list-group-item{position:relative;display:block;padding:.75rem 1.25rem;background-color:#fff;border:1px solid #eef0f3}.list-group-item+.list-group-item{border-top-width:0}.list-group-item+.list-group-item.active{margin-top:-1px;border-top-width:1px}.list-group-item.active{z-index:2;color:#fff;background-color:#1b68ff;border-color:#1b68ff}.list-group-item.disabled,.list-group-item:disabled{color:#6d7174;pointer-events:none;background-color:#fff}.list-group-item:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.list-group-item:last-child{border-bottom-right-radius:inherit;border-bottom-left-radius:inherit}.mb-0,.my-0{margin-bottom:0!important}.mb-4,.my-4{margin-bottom:1.5rem!important}.mb-5,.my-5{margin-bottom:3rem!important}.ml-auto,.mx-auto{margin-left:auto!important}.mr-auto,.mx-auto{margin-right:auto!important}.mt-4,.my-4{margin-top:1.5rem!important}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.text-muted{color:#6c757d!important}p{margin-top:0}.align-items-center{-ms-flex-align:center!important;align-items:center!important}.tab-content>.tab-pane{display:none}.fade:not(.show){opacity:0}.fade{transition:opacity .15s linear}.tab-content>.active{display:block}.nav{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;padding-left:0;margin-bottom:0;list-style:none}.nav-tabs{border-bottom:1px solid #dee2e6;margin-bottom:-1px}.nav-tabs .nav-link{cursor:pointer;color:#000;margin-bottom:-1px;background-color:transparent;border:1px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.nav-tabs .nav-link:focus,.nav-tabs .nav-link:hover{isolation:isolate;border-color:#e9ecef #e9ecef #dee2e6}.nav-link{display:block;padding:.5rem 1rem}.nav-tabs .nav-item.show .nav-link,.nav-tabs .nav-link.active{color:#495057;background-color:#fff;border-color:#dee2e6 #dee2e6 #fff;border-bottom: aliceblue 6px solid;}`,n=`.instantgram-light-modal-footer button,.instantgram-light-modal-header h5{font-family:"Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:16px!important}.instantgram-light-modal-overlay{display:none!important;opacity:0!important;transition:.1s!important;position:fixed!important;top:0!important;left:0!important;right:0!important;bottom:0!important;z-index:1000!important;background:rgba(0,0,0,.65)!important;justify-content:center!important;align-items:center!important}.instantgram-light-modal{transition:width .1s ease-in-out!important;display:inline-block!important;width:400px!important;padding:1.6px!important;z-index:1001!important}.instantgram-light-modal select{margin-left:.8px!important;border:1px solid #dbdbdb!important;border-radius:3px!important;color:#262626!important;outline:0!important;padding:3px!important;text-align:center!important}@media (min-width:736px){.instantgram-light-modal{width:500px!important}}.instantgram-light-modal-content{position:relative;display:flex;flex-direction:column;width:100%!important;pointer-events:auto!important;background-clip:padding-box!important;outline:0!important}.instantgram-light-modal-header{${t}}.instantgram-light-modal-header{color:#fff!important;border-top-left-radius:12px!important;border-top-right-radius:12px!important;padding:0 16px!important;text-align:center}.instantgram-light-modal-header h5:nth-child(2){margin-top:-15px!important;margin-bottom:20px!important}.instantgram-light-modal-body{background:#fff!important;color:#000!important;position:relative!important;-webkit-box-flex:1!important;-ms-flex:1 1 auto!important;flex:1 1 auto!important}.instantgram-light-modal-body>img{background:#000;object-fit:scale-down}.instantgram-light-modal-footer{background-color:#fff!important;border-top:1px solid #dbdbdb!important;border-left:0!important;border-right:0!important;border-bottom-left-radius:12px!important;border-bottom-right-radius:12px!important;line-height:1.5!important;min-height:48px!important;padding:4px 8px!important;user-select:none!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;-webkit-box-pack:end!important;-ms-flex-pack:end!important;justify-content:center!important}.instantgram-light-modal-footer button{width:100%!important;min-height:39px!important;background-color:transparent!important;border:0!important;outline:0!important;cursor:pointer!important}.instantgram-light-modal-footer button.active{color:#0095e2!important}.instantgram-light-modal-show{opacity:1!important}.instantgram-light-modal-visible{display:flex!important}#instantgram-light-bulk-download-indicator{text-align:center!important}.instantgram-light-modal-db{color:#fff!important;${t}display:block;padding:.8rem;width:100%;border:none;cursor:pointer}.instantgram-light-modal-db:focus{outline:0;${t}}.instantgram-light-modal-header h5{color:#fff!important;margin:revert!important;display:flex;justify-content:space-between;align-items:center;height:15px;}.header-text-left{flex:1;text-align:left;}.header-text-right{flex:1;text-align:right;}.header-text-middle{flex:1;text-align:center;}.header-text-middle a{color:#fff!important}.instantgram-light-settings{cursor:pointer;display:inline-block;color:rgba(255,255,255,.7);background-color:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.2);border-radius:.3rem;transition:color .2s,background-color .2s,border-color .2s;width:40px;height:40px;vertical-align:middle;}.instantgram-light-settings:hover{color:rgba(255,255,255,.8);text-decoration:none;background-color:rgba(255,255,255,.2);border-color:rgba(255,255,255,.3)}.instantgram-light-modal-body input{color:#000!important}`,r='<svg width="40px" height="40px" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" aria-labelledby="title" role="img"><title id="title">[instantgram]</title><rect x="50" y="50" width="924" height="924" rx="225" ry="225" fill="none" stroke="#FFFFFF" stroke-width="60"/><circle cx="512" cy="512" r="300" fill="none" stroke="#FFFFFF" stroke-width="60"/><circle cx="512" cy="512" r="150" fill="none" stroke="#FFFFFF" stroke-width="60"/><circle cx="512" cy="512" r="70" fill="#FFFFFF"/><line x1="512" y1="150" x2="512" y2="100" stroke="#FFFFFF" stroke-width="60"/><line x1="512" y1="874" x2="512" y2="924" stroke="#FFFFFF" stroke-width="60"/><line x1="150" y1="512" x2="100" y2="512" stroke="#FFFFFF" stroke-width="60"/><line x1="874" y1="512" x2="924" y2="512" stroke="#FFFFFF" stroke-width="60"/><rect x="730" y="150" width="120" height="120" rx="30" ry="30" fill="none" stroke="#FFFFFF" stroke-width="60"/></svg>';(o=l||(l={})).Ad="AD",o.Image="IMAGE",o.Video="VIDEO",o.Carousel="CAROUSEL",o.UNDEFINED="UNDEFINED";var o,l,s={langs:{"en-US":{"helpers.localizeDefaultLang":"[instantgram-light] set language: ${LANG_DEFAULT} \n For more information about available languages please check http://thinkbig-company.github.io/instantgram-light",alertWorksOnlyOn:"Works only on instagram.com",alertNotFound:"Did you open any Instagram post? Like for example<br/><div style='text-align:center'><a style='color:black' href='https://www.instagram.com/p/CIGrv1VMBkS/' target='_blank'>https://www.instagram.com/p/CIGrv1VMBkS/</a></div>",modalSettingsTitle:"Settings",modalSettingsAttention:"Attention: You must open this app again for your changes to be applied!",modalSettingsGeneral:"General",modalSettingsGenTitle1:"Enable monetized posts",modalSettingsGenDesc1:"Ad blockers must be deactivated",modalSettingsGenTitle2:"Open download in new tab",modalSettingsGenDesc2:"The download will be opened in a new tab",modalSettingsGenTitle3:"Slideshow on/off",modalSettingsGenDesc3:"Enable or disable the automatic slideshow",modalSettingsGenTitle4:"Change file name format for downloads",modalSettingsGenDesc4:"Change the file name format for the downloads here<br/>The default format is<br>{Username}__{Year}-{Month}-{Day}--{Hour}-{Minute}",modalSettingsStoriesTitle1:"Mute stories",modalSettingsStoriesDesc1:"Stories are muted when opened",modalSettingsStoriesTitle2:"Pause stories when opening",modalSettingsStoriesDesc2:"Stories are paused when opened",modalSettingsStoriesTitle3:"Display stories individually",modalSettingsStoriesDesc3:"Stories are displayed individually when opened",download:"Download",save:"Save",saved:"Saved",close:"Close",consoleWarnOutdatedInfo:"[instantgram-light] is outdated. Please check http://thinkbig-company.github.io/instantgram-light for available updates.",consoleWarnOutdatedVersions:"[instantgram-light] Installed version: ${data.version} | New update: ${data.onlineVersion}",ad:"Sponsored"},"de-DE":{"helpers.localizeDefaultLang":"Ausgew\xe4hlte Sprache: ${LANG_DEFAULT} \n Weitere Informationen zu den unterst\xfctzten Sprachen findest du auf http://thinkbig-company.github.io/instantgram-light",alertWorksOnlyOn:"Funktioniert nur auf instagram.com",alertNotFound:"Hast du einen Instagram Post ge\xf6ffnet? Zum Beispiel<br/><div style='text-align:center'><a style='color:black' href='https://www.instagram.com/p/CIGrv1VMBkS/' target='_blank'>https://www.instagram.com/p/CIGrv1VMBkS/</a></div>",modalSettingsTitle:"Einstellungen",modalSettingsAttention:"Achtung: Sie m\xfcssen diese App erneut \xf6ffnen, damit ihre \xc4nderungen \xfcbernommen werden!",modalSettingsGeneral:"Allgemein",modalSettingsGenTitle1:"Monetarisierte Beitr\xe4ge aktivieren",modalSettingsGenDesc1:"Werbeblocker m\xfcssen deaktiviert sein",modalSettingsGenTitle2:"Download in neuem Tab \xf6ffnen",modalSettingsGenDesc2:"Der Download wird in einem neuen Tab ge\xf6ffnet",modalSettingsGenTitle3:"Slideshow ein/ausschalten",modalSettingsGenDesc3:"Aktivieren oder deaktivieren Sie die automatische Slideshow",modalSettingsGenTitle4:"Dateinamenformat f\xfcr Downloads \xe4ndern",modalSettingsGenDesc4:"\xc4ndere hier das Dateinamenformat f\xfcr die Downloads<br/>Das Standardformat ist<br>{Username}__{Year}-{Month}-{Day}--{Hour}-{Minute}",modalSettingsStoriesTitle1:"Stories stummschalten",modalSettingsStoriesDesc1:"Beim \xf6ffnen werden Stories stummgeschaltet",modalSettingsStoriesTitle2:"Stories beim \xf6ffnen pausieren",modalSettingsStoriesDesc2:"Beim \xf6ffnen werden Stories pausiert",modalSettingsStoriesTitle3:"Stories einzeln anzeigen",modalSettingsStoriesDesc3:"Beim \xf6ffnen werden Stories einzeln angezeigt",download:"Download",save:"Speichern",saved:"Gespeichert",close:"Schlie\xdfen",consoleWarnOutdatedInfo:"[instantgram-light] ist veraltet. Bitte besuche die Seite http://thinkbig-company.github.io/instantgram-light f\xfcr ein Update.",consoleWarnOutdatedVersions:"[instantgram-light] Installierte Version: ${data.version} | Neue Version: ${data.onlineVersion}",ad:"Anzeige"},"es-AR":{"helpers.localizeDefaultLang":"[instantgram-light] establecer idioma: ${LANG_DEFAULT} \n Para m\xe1s informaci\xf3n sobre los idiomas disponibles, consulte http://thinkbig-company.github.io/instantgram-light",alertWorksOnlyOn:"S\xf3lo funciona en instagram.com",alertNotFound:"\xbfHas abierto alg\xfan post de Instagram? Como por ejemplo<br/><div style='text-align:center'><a style='color:black' href='https://www.instagram.com/p/CIGrv1VMBkS/' target='_blank'>https://www.instagram.com/p/CIGrv1VMBkS/</a></div>",modalSettingsTitle:"Ajustes",modalSettingsAttention:"Atenci\xf3n: \xa1Debes abrir esta aplicaci\xf3n nuevamente para que se apliquen los cambios!",modalSettingsGeneral:"General",modalSettingsGenTitle1:"Habilitar publicaciones monetizadas",modalSettingsGenDesc1:"Los bloqueadores de publicidad deben estar desactivados",modalSettingsGenTitle2:"Abrir descarga en una nueva pesta\xf1a",modalSettingsGenDesc2:"La descarga se abrir\xe1 en una nueva pesta\xf1a",modalSettingsGenTitle3:"Slideshow on/off",modalSettingsGenDesc3:"Activar/desactivar presentaci\xf3n de diapositivas",modalSettingsGenTitle4:"Cambiar el formato del nombre del archivo para descargas",modalSettingsGenDesc4:"Cambie el formato del nombre de archivo para las descargas aqu\xed<br/>El formato predeterminado es<br>{Username}__{Year}-{Month}-{Day}--{Hour}-{Minute}",modalSettingsStoriesTitle1:"Historias mudas",modalSettingsStoriesDesc1:"Las historias se silencian cuando se abren",modalSettingsStoriesTitle2:"Pausar historias al abrir",modalSettingsStoriesDesc2:"Las historias se pausan cuando se abren.",modalSettingsStoriesTitle3:"Mostrar historias individualmente",modalSettingsStoriesDesc3:"Las historias se muestran individualmente cuando se abren",download:"Descargar",save:"Ahorrar",saved:"Salvado",close:"Cerca",consoleWarnOutdatedInfo:"[instantgram-light] es obsoleto. Consulte en http://thinkbig-company.github.io/instantgram-light las actualizaciones disponibles.",consoleWarnOutdatedVersions:"[instantgram-light] Versi\xf3n instalada: ${data.version} | Nueva actualizaci\xf3n: ${data.onlineVersion}",ad:"Publicidad"},"pt-BR":{"helpers.localizeDefaultLang":"[instantgram-light] idioma configurado: ${LANG_DEFAULT} \npara mais informa\xe7\xf5es sobre os idiomas suportados, acesse http://thinkbig-company.github.io/instantgram-light",alertWorksOnlyOn:"[instantgram-light] somente funciona no instagram.com",alertNotFound:"ops, voc\xea est\xe1 em algum post do instagram? ex:<br/><div style='text-align:center'><a style='color:black' href='https://www.instagram.com/p/CIGrv1VMBkS/' target='_blank'>https://www.instagram.com/p/CIGrv1VMBkS/</a></div>",modalSettingsTitle:"Configura\xe7\xf5es",modalSettingsAttention:"Aten\xe7\xe3o: Voc\xea deve abrir este aplicativo novamente para que suas altera\xe7\xf5es sejam aplicadas!",modalSettingsGeneral:"Geral",modalSettingsGenTitle1:"Habilitar postagens monetizadas",modalSettingsGenDesc1:"Os bloqueadores de an\xfancios devem ser desativados",modalSettingsGenTitle2:"Abrir o download em uma nova guia",modalSettingsGenDesc2:"O download ser\xe1 aberto em uma nova guia",modalSettingsGenTitle3:"Ativa\xe7\xe3o/desativa\xe7\xe3o da apresenta\xe7\xe3o de slides",modalSettingsGenDesc3:"Ativar ou desativar a apresenta\xe7\xe3o autom\xe1tica de slides",modalSettingsGenTitle4:"Alterar o formato do nome do arquivo para downloads",modalSettingsGenDesc4:"Altere o formato do nome do arquivo para os downloads aqui<br/>O formato padr\xe3o \xe9<br>{Username}__{Year}-{Month}-{Day}--{Hour}-{Minute}",modalSettingsStoriesTitle1:"Hist\xf3rias mudas",modalSettingsStoriesDesc1:"As hist\xf3rias s\xe3o silenciadas quando abertas",modalSettingsStoriesTitle2:"Pausar hist\xf3rias ao abrir",modalSettingsStoriesDesc2:"As hist\xf3rias s\xe3o pausadas quando abertas",modalSettingsStoriesTitle3:"Exibir hist\xf3rias individualmente",modalSettingsStoriesDesc3:"As hist\xf3rias s\xe3o exibidas individualmente quando abertas",download:"Download",save:"Salvar",saved:"Salvo em",close:"Fechar",consoleWarnOutdatedInfo:"[instantgram-light] est\xe1 desatualizado. Acesse http://thinkbig-company.github.io/instantgram-light para atualizar",consoleWarnOutdatedVersions:"[instantgram-light] vers\xe3o local: ${data.version} | nova vers\xe3o: ${data.onlineVersion}",ad:"Patrocinado"}}};let d=navigator.language;-1!==d.indexOf("-")&&(d=d.split("-")[0]),-1!==d.indexOf("_")&&(d=d.split("_")[0]);let c={de:"de-DE",en:"en-US",es:"es-AR",pt:"pt-BR"}[d];function m(e,t=c){try{if(Object.prototype.hasOwnProperty.call(s.langs,t)||(t="en-US"),s.langs[t][e])return s.langs[t][e];return""}catch(i){return console.error(`[${ea.NAME}]LOC error:`,i),`ops, an error ocurred in localization system. Enter in https://github.com/ThinkBIG-Company/${ea.NAME}/issues/new and open an issue with this code: "LOC_dont_found_str_neither_default:[${t}->${e}]"
    for more information open the console`}}console.info(m("helpers.localizeDefaultLang").replace("${LANG_DEFAULT}",c));let g=new Map,u=()=>{let e=/"X-IG-App-ID":"([\d]+)"/,t=Array.from(document.querySelectorAll("body > script")).map(t=>t.textContent?.match(e)).find(Boolean);return t?t[1]:null},p=e=>{let t=window.location.pathname,i=t.split("/"),a={"/reel/":()=>i[2],"/reels/":()=>i[2],"/stories/":()=>i[3]};for(let e in a)if(t.startsWith(e))return a[e]();let n=/^\/p\/([^/]+)\//;return Array.from(e.querySelectorAll("a[href]")).map(e=>e.getAttribute("href").match(n)).find(e=>e)?.[1]||null};async function h(e){let t=window.location.href.match(/www.instagram.com\/stories\/[^/]+\/(\d+)/);if(t)return t[1];if(!g.has(e)){let t=`https://www.instagram.com/p/${e}/`,i=await fetch(t),a=(await i.text()).match(/instagram:\/\/media\?id=(\d+)|["' ]media_id["' ]:["' ](\d+)["' ]/);if(!a){let e=await fetch(t+"?__a=1&__d=dis");if(!(a=(await e.text()).match(/"pk":(\d+)/)))return null}let n=null;for(let e=0;e<a.length;++e)a[e]&&(n=a[e]);if(!n)return null;g.set(e,n)}return g.get(e)}let f=async e=>{let{type:t,articleNode:i,id:a,userName:n,userId:r}=e,o=u();if(!o)return console.log("AppID not found"),null;let l=await ({getReelsMediaFromFeed:async()=>{let e=a||await h(p(i));return e?`https://i.instagram.com/api/v1/feed/reels_media/?reel_ids=${a?"":"highlight%3A"}${e}`:null},getMediaFromInfo:async()=>{let e=await h(p(i));return e?`https://i.instagram.com/api/v1/media/${e}/info/`:null},getUserFromInfo:()=>`https://i.instagram.com/api/v1/users/${r}/info/`,getUserInfoFromWebProfile:()=>`https://i.instagram.com/api/v1/users/web_profile_info/?username=${n}`})[t]?.();return l?C(l,o):null},b=async(e,t)=>{let i=e=>window.location.pathname.startsWith(e),a=x(window.location.href),n=p(e),r=i("/stories/")?(await f({type:"getUserInfoFromWebProfile",userName:a}))?.data?.user?.id??null:null,o="",s=await E(e,n,r);if(a===n&&(i("/p/")||i("/reels/")))a=s.items?.[0]?.user?.username;else{let e=s.reels_media?.[0]?.user?.username,t=s.items?.[0]?.user?.username;a=e||t||a}let d=L("https://www.instagram.com",window.location.pathname,a);if(t.settings.showAds&&T(e,i("/stories/"))){if(!(e.querySelector("video[playsinline]")||e.querySelector("img[draggable]")))return{found:!1};let i=document.body,n=i.querySelectorAll("video")||[],r=Array.from(q(i).querySelectorAll('img[draggable="false"]')||[]).find(e=>B(e)&&!H(e)),c="",g=null;if(n.length){let e=P(R(n[0]).reverse().find(e=>"SECTION"===e.nodeName));c=e?.return?.memoizedProps?.post?.videoUrl||U(n[0]),g=l.Video}else r?.src&&!r.src.startsWith("data:")&&(c=r.src,g=l.Image);if(c){let{formattedFilename:e,url:i}=w(c,a,t.settings.formattedFilenameInput,0),n=k(g,i,t.settings.storiesMuted),r=`https://instantgram-light.1337.pictures/download.php?data=${btoa(i)}:${btoa(e)}`,l=t.settings.openInNewTab?i:r;return o+=`
                <div class="slide">
                    ${n}
                    <a href="${l}" style="width:inherit;font-size:20px;font-weight:600;margin-top:-4px;" 
                       ${t.settings.openInNewTab?'target="_blank" rel="noopener noreferrer"':""} 
                       class="${t.NAME}-modal-db">${m("download")}
                    </a>
                </div>`,{found:!0,mediaType:_(),mediaInfo:s,modalBody:D(o),selectedSliderIndex:0,userName:a,userLink:d}}return{found:!1}}if(t.settings.noMultiStories&&s.reels_media?.[0]?.items.length>0){let i=N(e);o=v(o,s.reels_media[0].items[i],i,a,t)}else M(s,(e,i)=>{o=v(o,e,i,a,t)});let c=D(o),g=N(e);return{found:!0,mediaType:_(),mediaInfo:s,modalBody:c,selectedSliderIndex:g,userName:a,userLink:d}};async function y(e,t,i,a,n){let r="",o=0;if(n.settings.noMultiStories&&t.reels_media?.[0]?.items.length>0){let a=N(e);r=v(r,t.reels_media[0].items[a],a,i,n),o=1}else o=M(t,(e,t)=>{r=v(r,e,t,i,n)});let l=D(r),s=o>0?N(e):0;return{found:!0,mediaType:_(),mediaInfo:t,modalBody:l,selectedSliderIndex:s,userName:i,userLink:a}}let v=(e,t,i,a,n)=>{let{formattedFilename:r,url:o}=w(t,a,n.settings.formattedFilenameInput,i),l=k($(t),o,n.settings.storiesMuted),s=`https://instantgram-light.1337.pictures/download.php?data=${btoa(o)}:${btoa(r)}`,d=n.settings.openInNewTab?o:s;return e+`
        <div class="slide">
            ${l}
            <a href="${d}" style="width:inherit;font-size:20px;font-weight:600;margin-top:-4px;" 
               ${n.settings.openInNewTab?'target="_blank" rel="noopener noreferrer"':""} 
               class="${n.NAME}-modal-db">${m("download")}
            </a>
        </div>`},S=e=>{if(!e?.getBoundingClientRect)return 0;let{top:t,bottom:i}=e.getBoundingClientRect(),a=window.scrollY||document.documentElement.scrollTop,n=a+window.innerHeight,r=t+window.scrollY,o=i+window.scrollY;return a>o||n<r?0:Math.round((Math.min(n,o)-Math.max(a,r))/(i-t)*100)},w=(e,t,i,a)=>{if("string"==typeof e){let n=new Date,r=I(i,{Minute:n.getMinutes().toString().padStart(2,"0"),Hour:n.getHours().toString().padStart(2,"0"),Day:n.getDate().toString().padStart(2,"0"),Month:(n.getMonth()+1).toString().padStart(2,"0"),Year:n.getFullYear().toString(),Username:t});return{formattedFilename:`${r}_${a+1}.txt`,url:e}}if(e&&"object"==typeof e){let n=new Date(1e3*e.taken_at),r=I(i,{Minute:n.getMinutes().toString().padStart(2,"0"),Hour:n.getHours().toString().padStart(2,"0"),Day:n.getDate().toString().padStart(2,"0"),Month:(n.getMonth()+1).toString().padStart(2,"0"),Year:n.getFullYear().toString(),Username:t}),{extension:o,url:l}=A(e);return{formattedFilename:`${r}_${a+1}.${o}`,url:l}}throw Error("Unsupported media type")},x=e=>{let t=e.match(/https:\/\/www\.instagram\.com\/(stories\/|reels\/|p\/)?([^/?]+)/);return t?t[2]:null},A=e=>e.items?"video_versions"in e?{extension:"mp4",url:e.items[0].video_versions[0].url}:{extension:"jpg",url:e.items[0].image_versions2.candidates[0].url}:"video_versions"in e?{extension:"mp4",url:e.video_versions[0].url}:{extension:"jpg",url:e.image_versions2.candidates[0].url},k=(e,t,i)=>e===l.Video?`<video style="background:black;" height="450" src="${t}" controls preload="metadata"${i?" muted":""}></video>`:`<img src="${t}" />`,E=async(e,t,i)=>t?window.location.pathname.startsWith("/stories/highlights/")?await f({type:"getReelsMediaFromFeed",articleNode:e,id:null}):window.location.pathname.startsWith("/stories/")?await f({type:"getReelsMediaFromFeed",articleNode:e,id:i}):await f({type:"getMediaFromInfo",articleNode:e}):await f({type:"getReelsMediaFromFeed",articleNode:e,id:i}),M=(e,t)=>e.reels_media?.[0]?.items?(e.reels_media[0].items.forEach(t),e.reels_media[0].items.length):e.items?.[0]?.carousel_media?(e.items[0].carousel_media.forEach(t),e.items[0].carousel_media.length):e.items?.[0]?(t(e.items[0],0),1):e.user?.hd_profile_pic_url_info.url?(t(e.user.hd_profile_pic_url_info,0),1):0,N=(e,t)=>{let i;if(!e)return 0;for(var a of["._acvz._acnc._acng","section header div",".x1ned7t2.x78zum5","section > div header > div","section > div > div > div > div > div > div > div > div","div > div > div > div > div > div > div > div"])if(i=e.querySelector(a))break;if(!i)return 0;let n=i?Array.from(i.children):[];for(let e=0;e<n.length;e++){let t=n[e].querySelectorAll("div");if(0===t.length){if("._acvz._acnc._acng"!=a)continue;if(n[e].classList.length>1)return e}else{if(t[0]?.parentNode?.parentNode?.parentNode?.parentNode?.parentNode?.children[1]?.querySelector("span"))return Array.from(t[0]?.parentNode?.parentNode?.children??[]).findIndex(e=>e.children.length>0),n.length,0;for(let i of Array.from(t)){let t=i.style.width,a=i.style.transform;if(t&&"100%"!==t||a&&""!==a.trim())return e}}}return 0},$=e=>e.carousel_media?l.Carousel:e.video_dash_manifest||e.video_duration||e.video_versions?l.Video:l.Image,_=()=>l.UNDEFINED,C=async(e,t)=>{try{let i=await fetch(e,{method:"GET",headers:{Accept:"*/*","X-IG-App-ID":t},credentials:"include",mode:"cors"});if(200!==i.status)return console.info(`Fetch API failed with status code: ${i.status}`),null;return await i.json()}catch(e){return console.info(`Error fetching data: ${e}
${e.stack}`),null}},F=e=>new Promise(t=>setTimeout(t,e)),I=(e,t)=>{for(let i in t){let a=RegExp(`{${i}}`,"g");e=e.replace(a,t[i])}return e.replace(/\s+/g,"-").replace(/[^\w-.]/g,"")},D=e=>`<div class="slider-container"><div class="slider">${e}</div><div class="slider-controls"></div></div>`,L=(e,t,i)=>t.startsWith("/p/")||t.startsWith("/stories/")?`${e}/${i}/`:t.startsWith("/reels/")?`${e}/${i}/reels/`:`${e}/${i}`,T=(e,t)=>{if(t){let t=(()=>{try{return e.children[0]?.children[0]?.children[0]?.children[0]?.children[0]?.children[1]?.children[0]?.children[0]?.children[1]?.children[1]?.children[0]?.textContent}catch{return}})();return!!t&&Object.values(s.langs).some(e=>e.ad===t)}return!!Array.from(e.querySelectorAll("path")).find(e=>"M21 17.502a.997.997 0 0 1-.707-.293L12 8.913l-8.293 8.296a1 1 0 1 1-1.414-1.414l9-9.004a1.03 1.03 0 0 1 1.414 0l9 9.004A1 1 0 0 1 21 17.502Z"===e.getAttribute("d"))},G=e=>{let t=e=>{if(!e)return null;let t=e[Object.keys(e).find(e=>e.includes("Instance")||e.includes("Fiber"))],i=t?.memoizedProps?.hidden===!0||t?.return?.memoizedProps?.hidden===!0;return"DIV"!==e.tagName||i?null:e},i=e.firstElementChild;for(;i;){let e=t(i);if(e)return e;i=i.nextElementSibling}return null},O=e=>{if(!e)return null;let t=e.querySelectorAll("div > div > div");return 0===t.length?null:Array.from(t).reduce((e,t)=>{let i=parseFloat(getComputedStyle(e).width);return parseFloat(getComputedStyle(t).width)>i?t:e},t[0])},q=e=>{let t=[...e?.querySelectorAll("section")||[]];return t[t.length-1]},R=e=>{let t=[];for(t.push(e);e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t},P=e=>{let t=Object.keys(e).find(e=>e.includes("Instance")||e.includes("Fiber"));return t?e[t]:null},z=(e,t)=>"hd"===e.quality&&"hd"!==t.quality?-1:"hd"!==e.quality&&"hd"===t.quality?1:t.bandwidth-e.bandwidth,V=e=>({quality:e.getAttribute("FBQualityClass"),bandwidth:+e.getAttribute("bandwidth"),baseUrl:e.querySelector("BaseURL")?.textContent?.trim()||null}),U=e=>{let t=e.src&&!e.src.startsWith("blob:")?e.src:null;if(t)return t;let i=P(e)?.return?.return?.memoizedProps?.manifest;if(!i)return null;let a=new DOMParser().parseFromString(i,"text/xml");return Array.from(a.querySelectorAll('Representation[mimeType="video/mp4"]')).map(V).filter(e=>e.baseUrl).sort(z)[0]?.baseUrl||null},B=e=>{let{top:t,right:i,bottom:a,left:n}=e.getBoundingClientRect();return a>0&&i>0&&n<window.innerWidth&&t<window.innerHeight},H=e=>{let t=e.parentElement;return"user-avatar"===e.getAttribute("data-testid")||e.width<48||["span","a"].includes(t?.localName)||R(e).some(e=>"HEADER"===e.nodeName)};class W{constructor(e){if(this.modal=null,this.imageURL=e.imageURL||"",this.heading=e.heading||[""],this.headingStyle=e.headingStyle||"",this.body=e.body||[""],this.bodyStyle=e.bodyStyle||"",this.buttonList=e.buttonList||[],this.callback=e.callback||null,null==document.getElementById(ea.NAME+"-modal")){let e=document.createElement("style");e.id=ea.NAME+"-modal",e.innerHTML=n,document.head.appendChild(e)}}get element(){return this.modal}createModal(){let e=document.createElement("div");e.classList.add(ea.NAME+"-modal-overlay");let t=document.createElement("div");t.classList.add(ea.NAME+"-modal"),e.appendChild(t);let i=document.createElement("div");i.classList.add(ea.NAME+"-modal-content"),t.appendChild(i);let a=document.createElement("div");a.classList.add(ea.NAME+"-modal-header"),this.headingStyle.length>0&&a.setAttribute("style",this.headingStyle),i.appendChild(a),this.heading.forEach(e=>{if("string"!=typeof e||/<\/?[a-z][\s\S]*>/i.test(e)){if(/<\/?[a-z][\s\S]*>/i.test(e)){let t;let i=document.createElement("div"),n=document.createDocumentFragment();for(i.innerHTML=e;null!==(t=i.firstChild);)n.appendChild(t);a.appendChild(n)}else a.appendChild(e)}else{let t=document.createElement("h5");t.innerHTML=e,a.appendChild(t)}});let n=document.createElement("div");if(n.classList.add(ea.NAME+"-modal-body"),this.bodyStyle.length>0&&n.setAttribute("style",this.bodyStyle),i.appendChild(n),this.imageURL.length>0){let e=document.createElement("div");i.appendChild(e);let t=document.createElement("img");t.setAttribute("height","76px"),t.setAttribute("width","76px"),t.style.margin="auto",t.style.paddingBottom="20px",t.setAttribute("src",this.imageURL),e.appendChild(t)}if(this.body.forEach(e=>{if("string"!=typeof e||/<\/?[a-z][\s\S]*>/i.test(e)){if(/<\/?[a-z][\s\S]*>/i.test(e)){let t;let i=document.createElement("div"),a=document.createDocumentFragment();for(i.innerHTML=e;null!==(t=i.firstChild);)a.appendChild(t);n.appendChild(a)}else n.appendChild(e)}else{let t=document.createElement("div");t.innerText=e,n.appendChild(t)}}),this.buttonList.length>0){let e=document.createElement("div");e.classList.add(ea.NAME+"-modal-footer"),i.appendChild(e),this.buttonList.forEach(t=>{let i=document.createElement("button");i.classList.add(ea.NAME+"-modal-button"),i.innerText=t.text,t.active&&i.classList.add("active"),i.onclick=()=>{t&&t.callback&&t.callback(),this.close.bind(this)()},e.appendChild(i)})}else i.style.paddingBottom="4px;";return e}async open(){this.modal&&await this.close(),this.modal=this.createModal(),document.body.appendChild(this.modal),this.modal.classList.add(ea.NAME+"-modal-visible"),setTimeout(()=>{this.modal.classList.add(ea.NAME+"-modal-show")}),this.callback&&this.callback(this,this.modal)}async close(){this.modal&&(this.modal.classList.remove(ea.NAME+"-modal-show"),await F(100),this.modal.classList.remove(ea.NAME+"-modal-visible"),this.modal.parentNode.removeChild(this.modal),this.modal=null)}async refresh(){this.modal&&(this.modal.parentNode.removeChild(this.modal),this.modal=null),await this.open(),this.callback&&this.callback(this,this.modal.querySelector("."+ea.NAME+"-modal-body"))}}class j{getName(){return"FeedScanner"}collectMediaElementsInfo(e){return Array.from(e).map((e,t)=>({i1:t,mediaEl:e,elemVisiblePercentage:S(e)||0}))}async execute(e){try{let t=document.getElementsByTagName("article");if(0===t.length)return{found:!1,errorMessage:"No target found."};let i=this.collectMediaElementsInfo(t).reduce((e,t)=>e.elemVisiblePercentage>t.elemVisiblePercentage?e:t),a=t[i.i1];if(!a||a.getBoundingClientRect().height<40)return{found:!1,errorMessage:"Article not found or too small, likely an ad"};return await b(a,e)}catch(t){return console.error(`[${e.NAME}] ${e.VERSION}`,this.getName()+"()",t),{found:!1,errorMessage:t.message,error:t}}}}class Y{getName(){return"PostAndReelScanner"}getArticleElement(){return document.querySelector("div[role='dialog'] article")||document.querySelector("section main > div > :first-child > :first-child")}async execute(e){try{let t=this.getArticleElement();if(!t)return{found:!1,errorMessage:"No target found."};return await b(t,e)}catch(t){return console.error(`[${e.NAME}] ${e.VERSION}`,this.getName()+"()",t),{found:!1,errorMessage:t.message,error:t}}}}class X{getName(){return"ProfileScanner"}async handleProfilePage(e){let t=x(window.location.href);if(!t)return{found:!1,errorMessage:"Invalid username extracted from URL"};try{let i=await f({type:"getUserInfoFromWebProfile",userName:t});if(!i.data.user.id)return{found:!1,errorMessage:"No userID found in userInfo"};let a=i.data.user.id,n=await f({type:"getUserFromInfo",userId:a});if(n&&n.user.hd_profile_pic_url_info.url)return await y(null,n,t,window.location.href,e);return{found:!1,errorMessage:"Incomplete userDetails received"}}catch(e){return{found:!1,userName:t,errorMessage:e.message,error:e}}}async execute(e){if(!e.regexProfilePath.test(window.location.pathname))return{found:!1,errorMessage:"Path does not match profile path regex, exiting."};try{let t=await this.handleProfilePage(e);if(!t)return{found:!1,errorMessage:"No result from handleProfilePage, returning null."};return t}catch(t){return console.error(`[${e.NAME}] ${e.VERSION}`,this.getName()+"()",t),{found:!1,errorMessage:t.message,error:t}}}}class K{getName(){return"ReelsScanner"}getRelevantArticles(){return Array.from(document.querySelectorAll("section > main > div > div")).filter(e=>e.children.length>0)}findMostRelevantArticle(e){if(0===e.length)return null;let t=e.map((e,t)=>({index:t,article:e,visibility:S(e)})).reduce((e,t)=>e.visibility>t.visibility?e:t,{index:-1,visibility:0});return t.visibility>0?e[t.index]:null}async execute(e){try{let t=this.getRelevantArticles(),i=this.findMostRelevantArticle(t);if(!i)return{found:!1,errorMessage:"No target found."};return await b(i,e)}catch(t){return console.error(`[${e.NAME}] ${e.VERSION}`,this.getName()+"()",t),{found:!1,errorMessage:t.message,error:t}}}}class J{getName(){return"StoriesScanner"}pausePlayCurrentStory(e){let t=Array.from(e.querySelectorAll("path")).find(e=>"M15 1c-3.3 0-6 1.3-6 3v40c0 1.7 2.7 3 6 3s6-1.3 6-3V4c0-1.7-2.7-3-6-3zm18 0c-3.3 0-6 1.3-6 3v40c0 1.7 2.7 3 6 3s6-1.3 6-3V4c0-1.7-2.7-3-6-3z"===e.getAttribute("d"));if(t){let e=t.closest('div[role="button"]');e?.click()}}shouldPauseStory(e){return"true"===localStorage.getItem(e.STORAGE_NAME+"_settings_stories_2")}findCurrentStory(e){let t=Array.from(e.querySelectorAll("section")),i=null;for(let e of t){let t=O(e);if(t){i=t;break}}return i}async handleHighlightsStories(e,t){let i=this.findCurrentStory(e);return i?(this.shouldPauseStory(t)&&this.pausePlayCurrentStory(i),b(i,t)):null}async handleFeedStories(e,t){let i=G(e.querySelector("div > div > div"));return(i=this.findCurrentStory(i))?(this.shouldPauseStory(t)&&this.pausePlayCurrentStory(i),b(i,t)):null}async execute(e){try{let t=document.querySelector('[id^="mount_"]');if(!t)return{found:!1,errorMessage:"No target found."};let i=window.location.pathname;if(i.startsWith("/stories/highlights/"))return await this.handleHighlightsStories(t,e);if(i.startsWith("/stories/"))return await this.handleFeedStories(t,e);return{found:!1,errorMessage:"No target found."}}catch(t){return console.error(`[${e.NAME}] ${e.VERSION}`,this.getName()+"()",t),{found:!1,errorMessage:t.message,error:t}}}}class Z{getName(){return"MediaScanner"}constructor(){this.svgSettings=null;let e="http://www.w3.org/2000/svg";this.svgSettings=document.createElementNS(e,"svg"),this.svgSettings.setAttribute("style","margin-left: auto; margin-right:auto; display:block;"),this.svgSettings.setAttribute("aria-label","Optionen"),this.svgSettings.setAttribute("class","x1lliihq x1n2onr6"),this.svgSettings.setAttribute("color","rgb(255, 255, 255)"),this.svgSettings.setAttribute("fill","rgb(255, 255, 255)"),this.svgSettings.setAttribute("height","24"),this.svgSettings.setAttribute("role","img"),this.svgSettings.setAttribute("viewBox","0 0 24 24"),this.svgSettings.setAttribute("width","24");let t=document.createElementNS(e,"title");t.textContent="Optionen",this.svgSettings.appendChild(t);let i=document.createElementNS(e,"circle");i.setAttribute("cx","12"),i.setAttribute("cy","12"),i.setAttribute("fill","none"),i.setAttribute("r","8.635"),i.setAttribute("stroke","currentColor"),i.setAttribute("stroke-linecap","round"),i.setAttribute("stroke-linejoin","round"),i.setAttribute("stroke-width","2"),this.svgSettings.appendChild(i);let a=document.createElementNS(e,"path");a.setAttribute("d","M14.232 3.656a1.269 1.269 0 0 1-.796-.66L12.93 2h-1.86l-.505.996a1.269 1.269 0 0 1-.796.66m-.001 16.688a1.269 1.269 0 0 1 .796.66l.505.996h1.862l.505-.996a1.269 1.269 0 0 1 .796-.66M3.656 9.768a1.269 1.269 0 0 1-.66.796L2 11.07v1.862l.996.505a1.269 1.269 0 0 1 .66.796m16.688-.001a1.269 1.269 0 0 1 .66-.796L22 12.93v-1.86l-.996-.505a1.269 1.269 0 0 1-.66-.796M7.678 4.522a1.269 1.269 0 0 1-1.03.096l-1.06-.348L4.27 5.587l.348 1.062a1.269 1.269 0 0 1-.096 1.03m11.8 11.799a1.269 1.269 0 0 1 1.03-.096l1.06.348 1.318-1.317-.348-1.062a1.269 1.269 0 0 1 .096-1.03m-14.956.001a1.269 1.269 0 0 1 .096 1.03l-.348 1.06 1.317 1.318 1.062-.348a1.269 1.269 0 0 1 1.03.096m11.799-11.8a1.269 1.269 0 0 1-.096-1.03l.348-1.06-1.317-1.318-1.062.348a1.269 1.269 0 0 1-1.03-.096"),a.setAttribute("fill","none"),a.setAttribute("stroke","currentColor"),a.setAttribute("stroke-linejoin","round"),a.setAttribute("stroke-width","2"),this.svgSettings.appendChild(a)}initModalSettingsListeners(e,t){let i=document.querySelectorAll("div.nav-tabs > button.nav-link"),a=document.querySelectorAll(".tab-pane"),n=e=>{e.preventDefault(),i.forEach(e=>e.classList.remove("active")),a.forEach(e=>e.classList.remove("show","active"));let t=e.currentTarget;t.classList.add("active");let n=t.getAttribute("data-target");if(n){let e=document.querySelector(n);e&&e.classList.add("show","active")}};i.forEach(e=>{e.addEventListener("click",n)}),Array.from(e.querySelectorAll('label.slideon input[type="checkbox"]')).forEach(e=>{let i=`${t.STORAGE_NAME}_${e.id.replace(/-/g,"_")}`;e.checked="true"===localStorage.getItem(i),e.addEventListener("change",()=>{localStorage.setItem(i,String(e.checked))})});let r=e.querySelector("#settings-general-4");if(r){let i=`${t.STORAGE_NAME}_settings_general_4`;r.value=localStorage.getItem(i)||"{Username}__{Year}-{Month}-{Day}--{Hour}-{Minute}";let a=e.querySelector("#settings-general-btn-4");a.addEventListener("click",e=>{e.preventDefault(),localStorage.setItem(i,r.value),this.updateInputButtonStyle(a,"saved",`${t.NAME}-primary`,`${t.NAME}-success`),setTimeout(()=>{this.updateInputButtonStyle(a,"save",`${t.NAME}-success`,`${t.NAME}-primary`)},1e3)})}}initializeStyles(e){this.removeStyleTagsWithIDs([e.NAME+"-cssGeneral",e.NAME+"-cssSlideOn",e.NAME+"-cssCarouselSlider"]),this.appendStyles(e.NAME+"-cssGeneral",a),this.appendStyles(e.NAME+"-cssSlideOn",i),this.appendStyles(e.NAME+"-cssCarouselSlider",".slider-container{width:500px;overflow:hidden;position:relative}.slider{height:100%;display:flex;transition:left .5s;position:inherit}.slide{position:relative;background:#000}.slide img, .slide video{width:501px;height:300px;object-fit:contain}.slider-controls{display:flex;justify-content:center;margin-top:10px;margin-bottom:10px;flex-wrap:wrap;gap:5px;}.slider-controls button{cursor: pointer;width:25px;height:25px;padding:0;margin:0 5px;border-radius:50%;background:#ddd;border:0}.slider-controls button.active{background:#999}")}appendStyles(e,t){let i=document.createElement("style");i.id=e,i.innerHTML=t,document.body.appendChild(i)}displayModal(e,t,i,a,n){new W({heading:[t],body:[e.modalBody],bodyStyle:i,buttonList:a,callback:n}).open()}handleSettingsButtonClick(e){let t=(e,t="",i={},a="")=>{let n=document.createElement(e);return t&&(n.className=t),Object.keys(i).forEach(e=>n.setAttribute(e,i[e])),a&&(n.innerHTML=a),n},i=(i,a,n,r)=>{let o=t("div","list-group-item"),l=t("div","row align-items-center"),s=t("div","col pr-0");s.appendChild(t("strong","mb-0",{},i)),a&&s.appendChild(t("p","text-muted mb-0",{},a));let d=t("div","col-auto"),c=t("label","slideon"),g=t("input","",{type:"checkbox",id:`settings-${n}`}),u=t("span","slideon-slider");if(c.appendChild(g),c.appendChild(u),d.appendChild(c),r){let r=t("div","form-group",{style:"display: flex; flex-direction: column; align-items: flex-start;"},`<strong class="col pr-0">${i}</strong>
                     <p class="text-muted ml-15 mb-0">${a}</p>
                     <input type="text" class="form-control ml-15 mt-1 w94" id="settings-${n}" placeholder="${i}">
                     <button type="submit" class="${e.NAME}-btn ${e.NAME}-btn-primary mb-2 mt-2" id="settings-general-btn-4" style="align-self: flex-end; margin-right: 12px;">${m("save")}</button>`);l.appendChild(r)}else l.appendChild(s),l.appendChild(d);return o.appendChild(l),o},a=t("div","container"),n=t("div","row justify-content-center"),o=t("div","col-12 col-lg-10 col-xl-8 mx-auto"),l=t("div","my-4"),s=t("nav"),d=t("div","nav nav-tabs",{id:"nav-tab",role:"tablist"});d.appendChild(t("button","nav-link active",{id:"nav-general-tab","data-toggle":"tab","data-target":"#nav-general",type:"button",role:"tab","aria-controls":"nav-general","aria-selected":"true"},`${m("modalSettingsGeneral")}`)),d.appendChild(t("button","nav-link",{id:"nav-stories-tab","data-toggle":"tab","data-target":"#nav-stories",type:"button",role:"tab","aria-controls":"nav-stories","aria-selected":"false"},"Stories"));let c=t("div","tab-content",{id:"nav-tabContent"}),g=t("div","tab-pane fade active show",{id:"nav-general",role:"tabpanel","aria-labelledby":"nav-general-tab"}),u=t("div","tab-pane fade",{id:"nav-stories",role:"tabpanel","aria-labelledby":"nav-stories-tab"});[{title:"modalSettingsGenTitle1",description:"modalSettingsGenDesc1",settingsName:"general-1"},{title:"modalSettingsGenTitle2",description:"modalSettingsGenDesc2",settingsName:"general-2"},{title:"modalSettingsGenTitle3",description:"modalSettingsGenDesc3",settingsName:"general-3"},{title:"modalSettingsGenTitle4",description:"modalSettingsGenDesc4",settingsName:"general-4",isLargeInput:!0},{title:"modalSettingsStoriesTitle1",description:"modalSettingsStoriesDesc1",settingsName:"stories-1"},{title:"modalSettingsStoriesTitle2",description:"modalSettingsStoriesDesc2",settingsName:"stories-2"},{title:"modalSettingsStoriesTitle3",description:"modalSettingsStoriesDesc3",settingsName:"stories-3"}].forEach(e=>{(e.title.includes("Gen")?g:u).appendChild(i(m(e.title),m(e.description),e.settingsName,e.isLargeInput))}),c.appendChild(g),c.appendChild(u),s.appendChild(d),l.appendChild(s),l.appendChild(c),l.appendChild(t("div","alert alert-warning mt-3",{},m("modalSettingsAttention"))),o.appendChild(l),n.appendChild(o),a.appendChild(n),new W({heading:[`<h5>
                    <span class="header-text-left">${r}</span>
                    <span class="header-text-middle">${m("modalSettingsTitle")}</span>
                    <span class="header-text-right" style="margin-right: 0">v${e.VERSION}</span>
                </h5>`],body:[a],bodyStyle:null,buttonList:[{active:!0,text:m("close")}],callback:(t,i)=>{this.initModalSettingsListeners(i,e)}}).open()}async handleURLPatterns(e){if(!e.hostname.includes("instagram.com")){new W({heading:[`<h5>
                        <span class="header-text-left">${r}</span>
                        <span class="header-text-right">v${e.VERSION}<button class="${e.NAME}-settings" style="margin-left:10px">${this.svgSettings.outerHTML}</button></span>
                    </h5>`],body:[m("alertWorksOnlyOn")],bodyStyle:"text-align:center;padding:20px",buttonList:[{active:!0,text:"Ok"}],callback:(t,i)=>{i.querySelector(`.${e.NAME}-settings`).addEventListener("click",()=>{this.handleSettingsButtonClick(e)})}}).open();return}for(let t of[{regex:e.regexStoriesURI,scanner:J},{regex:e.regexProfilePath,scanner:X},{regex:e.regexRootPath,scanner:j},{regex:e.regexPostPath,scanner:Y},{regex:e.regexReelURI,scanner:Y},{regex:e.regexReelsURI,scanner:K}])if(t.regex.test(window.location.pathname))try{let i=new t.scanner,a=await i.execute(e);a.found?(a.foundByModule=i.getName(),this.displayModal(a,`<h5>
                                <span class="header-text-left">${r}</span>
                                <span class="header-text-middle"><a href="${a.userLink}">@${a.userName}</a></span>
                                <span class="header-text-right"><button class="${e.NAME}-settings">${this.svgSettings.outerHTML}</button></span>
                            </h5>`,"padding:0!important;text-align:center",[{active:!0,text:m("close")}],(t,i)=>{if(i.querySelector(".slider")){let t;let n=i.querySelector(".slider"),r=i.querySelectorAll(".slide"),o=i.querySelector(".slider-controls"),l=a.selectedSliderIndex;r.forEach((e,t)=>{let i=document.createElement("button");i.innerHTML=String(t+1),i.dataset.index=String(t),i.classList.toggle("active",1===r.length),r.length>1&&i.addEventListener("click",()=>{l=t,s(!0)}),o.appendChild(i)});let s=i=>{null!==document.fullscreenElement||(g(!1),n.style.transform=`translateX(${-r[0].clientWidth*l}px)`,[...o.children].forEach((e,t)=>{e.classList.toggle("active",t===l)}),i&&clearTimeout(t),"true"===localStorage.getItem(`${e.STORAGE_NAME}_settings_general_3`)&&d())},d=()=>{let e=r[l].querySelector("video");e?e.play()&&(e.onended=c):m()},c=()=>{l=(l+1)%r.length,s(!1)},m=()=>{t=setTimeout(c,5e3)},g=e=>{r.forEach(e=>{let t=e.querySelector("video");t&&t.pause()})};r.length>1&&s(!1);let u=()=>{null!==document.fullscreenElement&&clearTimeout(t)};document.addEventListener("fullscreenchange",u)}i.querySelector(`.${e.NAME}-settings`).addEventListener("click",()=>{this.handleSettingsButtonClick(e)})})):new W({heading:[`<h5>
                                    <span class="header-text-left">${r}</span>
                                    <span class="header-text-right">v${e.VERSION}<button class="${e.NAME}-settings" style="margin-left:10px">${this.svgSettings.outerHTML}</button></span>
                                </h5>`],body:[m("alertNotFound")],bodyStyle:"text-align:center;padding:20px",buttonList:[{active:!0,text:"Ok"}],callback:(t,i)=>{i.querySelector(`.${e.NAME}-settings`).addEventListener("click",()=>{this.handleSettingsButtonClick(e)})}}).open()}catch(i){let e=new t.scanner;console.error(`Error executing scanner ${e.getName()}:`,i)}}isModalOpen(e){return!!document.querySelector("div."+e.NAME+"-modal-overlay."+e.NAME+"-modal-visible."+e.NAME+"-modal-show")}removeStyleTagsWithIDs(e){e.forEach(e=>{let t=document.getElementById(e);t&&t.remove()})}shakeModal(e){let t=document.querySelector("."+e);t&&(t.style.animation="horizontal-shaking 0.25s linear infinite",setTimeout(()=>t.style.animation=null,1e3))}updateInputButtonStyle(e,t,i,a){e.textContent=m(t),e.classList.contains(a)?(e.classList.remove(a),e.classList.add(i)):(e.classList.remove(i),e.classList.add(a))}async execute(e){try{if(this.isModalOpen(e)){this.shakeModal(`${e.NAME}-modal`);return}this.initializeStyles(e),await this.handleURLPatterns(e)}catch(t){console.error(`${this.getName()}()`,`[${e.NAME}] ${e.VERSION}`,t)}}}class Q{constructor(e){this.program=e,this.storageKey=`${e.STORAGE_NAME}`}async check(e){let t=await this.fetchChangelog(),i=t?.date||e;this.storeVersionInfo(e,i),this.isUpdateNecessary(e,i)?t&&this.processChangelog(e,t):console.info(`[${this.program.NAME}] No update required`)}async fetchChangelog(){try{let e=await fetch("https://www.instagram.com/graphql/query/?query_hash=003056d32c2554def87228bc3fd9668a&variables={%22id%22:45039295328,%22first%22:100}"),[t,i]=(await e.json()).data.user.edge_owner_to_timeline_media.edges[0].node.edge_media_to_caption.edges[0].node.text.split("::");return{date:t,textBody:i}}catch(e){return console.error("Failed to fetch changelog: ",e),null}}processChangelog(e,{date:t,textBody:i}){let a=this.generateHtmlListFromText(i);console.info(m("modules.update@update_successful")),new Date(t)>new Date(e)&&(this.showUpdateModal(e,t,a),this.informOutdatedVersionInDevConsole())}generateHtmlListFromText(e){return e.split(/[.!?]/).filter(e=>""!==e.trim()).reduce((e,t)=>e+`<li>${t.trim()}</li>`,"<ul style='padding: 20px;'>")+"</ul>"}storeVersionInfo(e,t){let i=new Date;i.setHours(i.getHours()+6);let a={version:e,onlineVersion:t,lastVerification:Date.now(),dateExpiration:i.getTime()};window.localStorage.setItem(this.storageKey,JSON.stringify(a))}isUpdateNecessary(e,t){let i=JSON.parse(window.localStorage.getItem(this.storageKey)||"{}"),a=new Date(e),n=new Date(t),r=Date.now()>i.dateExpiration;return n>a||r||!i}showUpdateModal(e,t,i){let a=new Z;new W({heading:[`<h5><span class="header-text-left">${r}</span><span class="header-text-right">v${e}</span></h5>`],body:[`<div>Update available v${t}</div><div>${i}</div>`],buttonList:[{active:!0,text:"Ok"}],callback:(e,t)=>{t.querySelector(`.${this.program.NAME}-settings`).addEventListener("click",()=>{a.handleSettingsButtonClick(this.program)})}}).open()}informOutdatedVersionInDevConsole(){let e=JSON.parse(window.localStorage.getItem(this.storageKey)||"{}");console.warn(m("consoleWarnOutdatedInfo")),console.warn(m("consoleWarnOutdatedVersions").replace("${data.version}",e.version).replace("${data.onlineVersion}",e.onlineVersion))}}console.clear();let ee="instantgram-light",et="2024.09.03",ei=ee.toLowerCase().replace(/-/g,"_"),ea={NAME:ee,STORAGE_NAME:ei,DEVELOPMENT:!1,VERSION:et,browser:(()=>{let e;let t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(i[1]))return{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""};if("Chrome"===i[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/)))return{name:e[1].replace("OPR","Opera"),version:e[2]};if(i.length>1){let e=t.match(/version\/(\d+)/i);return e&&(i[2]=e[1]),{name:i[1],version:i[2]}}return{name:navigator.appName,version:navigator.appVersion}})(),hostname:window.location.hostname,path:window.location.pathname,regexHostname:/^instagram\.com$/,regexRootPath:/^\/+$/,regexProfilePath:/^\/(\w[-\w.]+)\/?$/,regexPostPath:/^\/p\//,regexReelURI:/reel\/(.*)+/,regexReelsURI:/reels\/(.*)+/,regexStoriesURI:/\/stories\/(\w+)|\/highlights\/(\d+)\//,foundByModule:null,settings:{showAds:"true"===localStorage.getItem(`${ei}_settings_general_1`),openInNewTab:"true"===localStorage.getItem(`${ei}_settings_general_2`),autoSlideshow:"true"===localStorage.getItem(`${ei}_settings_general_3`),formattedFilenameInput:localStorage.getItem(`${ei}_settings_general_4`)||"{Username}__{Year}-{Month}-{Day}--{Hour}-{Minute}",storiesMuted:"true"===localStorage.getItem(`${ei}_settings_stories_1`),noMultiStories:"true"===localStorage.getItem(`${ei}_settings_stories_3`)}};(async()=>{new Z().execute(ea);{let e=new Q(ea);await e.check(et)}})(),e.program=ea}({});
